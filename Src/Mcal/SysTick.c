/**********************************************************************************************************************
 *  FILE DESCRIPTION
 *  -----------------------------------------------------------------------------------------------------------------*/
/**        \file  SysTick.c
 *        \brief  System Timer (SysTick) Driver
 *
 *      \details The driver configure the system timer
 *
 *
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  INCLUDES
 *********************************************************************************************************************/
#include "Std_Types.h"
#include "SysTick.h"

/**********************************************************************************************************************
*  LOCAL MACROS CONSTANT\FUNCTION
*********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL DATA 
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL DATA
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTION PROTOTYPES
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTIONS
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL FUNCTIONS
 *********************************************************************************************************************/


/******************************************************************************
* \Syntax          : SysTick_Init(const SysTick_CfgType* ConfigPtr)        
* \Description     : Initialize the SysTick module                                   
*                                                                             
* \Sync\Async      : Synchronous                                               
* \Reentrancy      : Non Reentrant                                             
* \Parameters (in) : ConfigPtr   Pointer to struct of user-defined configuration                  
* \Parameters (out): None                                                      
* \Return value:   : None                                
*******************************************************************************/

void SysTick_Init(const SysTick_CfgType* ConfigPtr)
{
    SysTick_STCTRL &= ~(SYSTICK_ENABLE);
    SysTick_STRELOAD |= ConfigPtr[0].ReloadValue;
    SysTick_STCURRENT|= ConfigPtr[0].ClearValue;
    
    switch (ConfigPtr[0].IntState)
    {
    case 0:
        SysTick_STCTRL &= ~(SYSTICK_INT_ENABLE);
        break;
    
    case 1:
        SysTick_STCTRL |= SYSTICK_INT_ENABLE;
        break;
    
    default:
        break;
    }

    switch (ConfigPtr[0].Clock)
    {
    case 0:
        SysTick_STCTRL &= ~(SYSTICK_CLOCK);
        break;
    
    case 1:
        SysTick_STCTRL |= SYSTICK_CLOCK;
        break;
    
    default:
        break;
    }

    switch (ConfigPtr[0].State)
    {
    case 0:
        SysTick_STCTRL &= ~(SYSTICK_ENABLE);
        break;
    
    case 1:
        SysTick_STCTRL |= SYSTICK_ENABLE;
        break;

    default:
        break;
    }

}

void SetReload(uint32 ReloadValue)
{
    SysTick_STRELOAD |= ReloadValue;
}

uint32 ReadCurrentTime(void)
{
    return SysTick_STCURRENT;
}

uint32 ReadCurrentCounts(void)
{
    return (SysTick_STCTRL>>16);
}
/**********************************************************************************************************************
 *  END OF FILE: IntCtrl.c
 *********************************************************************************************************************/
